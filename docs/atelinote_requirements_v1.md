ファイル名: atelinote_requirements_v1.md

# AteliNote 要件定義書（MVP）v1.0

## 1. 概要

- 名称: AteliNote（アトリノート）
- コンセプト: クリエイター向けの「メモ・タスク・アイデア」を一元管理し、AI エージェントと連携して創作プロジェクトを支援するアプリケーション。
- 対象ユーザー:

  - 音楽・イラスト・配信・開発など複数領域で活動する個人クリエイター
  - 企画～制作～配信までを一人、もしくは小規模チームで回している制作者

- スコープ（MVP）:

  - Web アプリ
  - Tauri ベースのデスクトップ／モバイルアプリ（Web アプリのラッパー＋一部ネイティブ機能）

UI については `docs/UI_architecture` 配下の Figma デザインおよび HTML モック（Project Board / Quick Capture / AI パネル）を準拠仕様とする。

---

## 2. 対象プラットフォーム

### 2.1 Web

- 対応ブラウザ: 最新の Chromium 系（Chrome / Edge）、Firefox、Safari
- レイアウト:

  - 3 カラム構成

    - 左: サイドバー（LP、Project Board、Quick Capture、設定、AI ログなどのナビ＋リスト）
    - 中央: コンテンツ領域（Project Board / Quick Capture など）
    - 右: AI エージェントとの対話パネル

  - レスポンシブ対応:

    - 幅 900px 未満: AI パネルはオーバーレイ（スライドイン）
    - 幅 720px 未満: 左サイドバーを非表示（ハンバーガーメニュー想定）、中央コンテンツを 1 カラム表示

### 2.2 デスクトップアプリ

- フレームワーク: Tauri（PC 向け）
- 対応 OS:

  - Windows 10/11（x64）
  - macOS（Apple Silicon / Intel）
  - （将来）Linux

- 構成:

  - フロント: Web と共通（SPA）
  - バックエンド: Rust 側でファイルアクセス・通知・ローカルキャッシュなどを提供

- 目的:

  - オフライン利用（ローカルキャッシュ）
  - OS ネイティブ通知
  - 将来的なローカル AI 推論（検討枠）

### 2.3 モバイルアプリ

- 現時点:

  - Tauri モバイル対応を前提とした設計のみ（実装時期は別途決定）
  - 当面は Web/PWA でのモバイル利用を想定

- レイアウト:

  - 1 カラム構成
  - サイドバー／AI パネルは画面遷移またはスライドインモーダルで切り替え

---

## 3. プラン仕様（Free / Plus / Pro）

### 3.1 プラン一覧

| 項目                 | Free             | Plus         | Pro              |
| -------------------- | ---------------- | ------------ | ---------------- |
| 月額料金             | 0 円             | 450 円       | 1,200 円         |
| 年額料金             | なし（将来検討） | 検討中       | 検討中           |
| ストレージ容量合計   | 1 GB             | 10 GB        | 100 GB           |
| 1 ファイル最大サイズ | 要件未定義       | 要件未定義   | 要件未定義       |
| プロジェクト数上限   | 3                | 5            | 無制限           |
| AI 利用レート／上限  | 最小限           | 中程度       | 高レート（優遇） |
| 対応プラットフォーム | 全て利用可能     | 全て利用可能 | 全て利用可能     |

- AI 利用レート／上限:

  - 1 日・1 ヶ月あたりのトークン数／ボイス分数などの具体値は別途定義（未確定）。
  - Pro プランは優先キュー／より長文の要約・長時間音声の文字起こしなどを許容する方向性。

---

## 4. 機能要件

### 4.1 共通基盤

- 認証／アカウント

  - Email + パスワードによるログイン
  - 将来的に外部 IdP（Google 等）は検討

- ナビゲーション

  - 左サイドバー:

    - LP（概要・チュートリアル）
    - Project Board
    - Quick Capture
    - 設定
    - AI Conversations（AI 会話ログ一覧）

  - アイテムの折り畳み／セクション見出しは Figma に準拠

- AI パネル（右カラム）

  - AI エージェントとのテキストチャット
  - モーダル等の展開時にも常に表示／利用可能
  - メッセージ入力欄＋送信ボタン＋添付用ボタン（UI モックどおり）

### 4.2 Quick Capture

#### 4.2.1 概要

- 「一旦なんでも放り込む」高速キャプチャエリア。
- 中央のカードタイル一覧として表示。

#### 4.2.2 主要機能（MVP）

1. メモ作成

   - タイトル＋本文（Plain / Markdown 切り替え）
   - テキスト入力欄はエディタモーダル内に配置（UI モック参照）。

2. ファイル添付

   - 対応ファイル種別:

     - 音声ファイル（例: .wav, .mp3）
     - 動画ファイル
     - ソースファイル（.java, .html, .css など）
     - その他一般ファイル（設計書等）

   - ファイルメタ情報（ファイル名・サイズ・種別）の保存。

3. 音声メモ

   - アップロードされた音声ファイルの文字起こし
   - 文字起こし結果の要約を Quick Capture メモとして保存

4. AI 要約連携

   - 任意メモを AI に送信し、要約結果を Quick Capture 内に新規メモとして保存可能。

5. UI

   - タイルレイアウト:

     - Figma の通り、サイズの異なるカードがグリッド状に並ぶ。
     - カード上にテキスト／アイコン（テキスト／音声／動画などの種別）を表示。

   - メモクリックで中央に大きなエディタモーダル表示（すりガラス風）。

#### 4.2.3 モーダル（メモ展開）仕様

- すべてのモーダルは以下のスタイルを基本とする:

  - 背景: 半透明＋ `backdrop-filter: blur(...)` によるすりガラス。
  - 中央にカード状のエディタパネル（角丸＋影）。
  - モーダル表示中も画面下部のツールバー（Quick Capture ツール群）は手前に表示（操作可能想定）。

- エディタモーダル共通要素:

  - タイトル行（プレースホルダバー）
  - サブタイトル／メタ情報行
  - Plain / Markdown モード切替ピル
  - 本文エリア（Markdown プレビューは後続検討）
  - 添付ファイルエリア（ファイル／音声波形など）

### 4.3 Project Board

#### 4.3.1 概要

- プロジェクト単位でメモ・タスクを俯瞰するボード。
- 中央エリアは「コルクボード＋付箋」のイメージで note-list-item を自由配置。

#### 4.3.2 主要機能（MVP）

1. プロジェクト単位のボード作成

   - Free / Plus / Pro に応じたプロジェクト上限。
   - 共通テンプレート（カラム構成）を 1 種類以上用意（詳細は未確定）。

2. メモ／カードの配置

   - Quick Capture からのメモをボード上に貼り付け（リンク／コピー仕様は要検討）。
   - ドラッグ＆ドロップで位置変更（MVP でどこまで実装するかは別途決定）。

3. メモ展開

   - Quick Capture 同様、カードクリックですりガラスモーダルによるエディタ表示。
   - 同一モーダルコンポーネントを再利用。

4. AI 連携

   - プロジェクト全体の要約取得（MVP 必須）
   - 選択した複数メモから「プロジェクト要約」を生成し、ボード上にまとめカードとして追加。

### 4.4 AI エージェント

#### 4.4.1 概要

- 右カラムのチャット UI で、AteliNote 専用の AI エージェントと対話。
- MVP での必須機能:

  - アイデア壁打ち（機能名・プロンプト設計は後述要検討）
  - 会話内容の要約を Quick Capture に保存
  - プロジェクト要約生成
  - ボイスメモ文字起こし・要約

#### 4.4.2 会話ログ

- AI Conversations セクションにて、

  - 過去の会話セッション一覧
  - 各セッションのタイトル／日時／最終メッセージ概要

- MVP では @メンション機能は実装しない。

### 4.5 通知機能

#### 4.5.1 概要

- タスク期限などのリマインド通知を提供。

#### 4.5.2 チャネル

- Web:

  - メール通知
  - （ブラウザプッシュは後続検討）

- デスクトップアプリ（Tauri）:

  - OS ネイティブ通知（Windows/macOS 用）

- モバイルアプリ（Tauri 想定）:

  - 将来的に OS プッシュ通知連携を検討

※ 通知トリガー（期限の何分前／何日前など）は要件未確定。

---

## 5. 非機能要件（MVP）

### 5.1 パフォーマンス／メモリ

- Electron ではなく Tauri を採用し、メモリ使用量を抑制する。
- 目標値（暫定）:

  - アプリ起動直後: 150 MB 以下（デスクトップクライアント）
  - Quick Capture でメモ 50 件程度表示時: 250 MB 以下

- 設計指針:

  - 画面単位でコード分割（lazy load）
  - リスト／ボードは仮想スクロール前提
  - AI 会話ログやメモ本文は必要時フェッチ（全ロードしない）

### 5.2 セキュリティ

- 通信は HTTPS 必須
- 認証情報／アクセストークンの安全な保管
- ファイルアップロード:

  - 拡張子・MIME チェック
  - サイズ上限（プラン別に決定予定）

### 5.3 信頼性・保守性

- バックエンドは API を明確に分離し、Web / Tauri クライアントで共通利用
- モーダル・AI パネル・ボード／キャプチャなど UI コンポーネントは共通化
- ログ出力:

  - クライアント側: 重大エラーのみ収集
  - サーバ側: API 呼び出し・AI 利用量などを記録

---

## 6. MVP スコープまとめ

- 含める:

  - アカウント管理
  - Project Board（共通テンプレ 1 種＋付箋配置・開閉）
  - Quick Capture（テキスト・ファイル添付・音声アップロード）
  - AI エージェント（壁打ち／要約／プロジェクト要約／ボイスメモ文字起こし）
  - AI 会話ログ一覧
  - 通知（期限リマインドの最低限）
  - Tauri デスクトップ版（Win/mac）の提供

- 含めない（MVP 以降）:

  - @メンション機能
  - チーム共同編集（共有プロジェクト／コメント等）
  - 高度なテンプレ管理（ジャンル別テンプレ）
  - モバイルネイティブアプリの本格リリース（Tauri モバイルは設計考慮のみ）

---

# 未確定・要確認事項リスト（現時点）

以下は、要件定義書 v1.0 時点でなお未確定／追加検討が必要な項目です。

## A. プラン／課金まわり

1. 年額料金の有無・金額（Plus / Pro）
2. 1 ファイルあたりの最大サイズ（プラン別）
3. AI 利用の具体的な上限値

   - 日次／月次トークン数
   - 文字起こし可能な音声の最大長（1 本あたり／月あたり）
   - Pro プランの優遇内容（優先度・レート・コンテキスト長など）

## B. AI 機能の詳細仕様

4. 「アイデア壁打ち」機能の正式名称と UX

   - 専用タブを用意するのか、通常チャットとどう差別化するか

5. 「プロジェクト要約」のトリガー・単位

   - 対象メモの範囲（すべて／タグ付けされたもののみ）
   - どの画面から実行するか（Project Board 右クリック、AI パネルコマンドなど）

6. Quick Capture 要約のフロー

   - 「AI に送る」ボタンの位置・UI
   - 要約結果をどのプロジェクト／どのカテゴリに保存するか

## C. Quick Capture / Project Board の仕様

7. Project Board のテンプレート構成

   - MVP で「共通テンプレ 1 種のみ」とするか
   - 共通テンプレの項目（カラム名・ワークフロー）

8. Quick Capture と Project Board の関係

   - メモを「移動」するのか「リンク」するのか
   - 片方を編集したときにもう片方へどう反映するか

9. 添付ファイルの上限と扱い

   - 1 メモあたりの最大ファイル数
   - プレビュー可能なファイルタイプ
   - 動画／音声の再生方法（ブラウザネイティブかカスタムプレイヤーか）

## D. 通知仕様

10. 通知のタイミング

    - 期限の何分／何時間／何日前に通知するか
    - デフォルト値とユーザー変更可否

11. 通知チャネルごとの ON/OFF 設定

    - メール / デスクトップ / モバイルプッシュの個別制御

12. 通知の対象イベント

    - タスク期限以外に通知すべきイベント（AI 完了通知など）の範囲

## E. モバイル展開

13. Tauri モバイル対応の導入タイミング

    - MVP から同時に出すか、Web + デスクトップに絞るか

14. モバイル UI の最小要件

    - どの画面までをモバイル最適化の対象とするか
    - オフライン機能の必要性

## F. データモデル・同期

15. ローカルキャッシュの粒度

    - どこまでローカル保持するか（直近 N プロジェクト／メモなど）

16. オフライン時の編集・競合解消ポリシー
17. AI 会話ログの保持期間・削除ポリシー

---

以上を前提として、次のステップでは:

- 上記「未確定項目 A〜F」について優先順位を付け、MVP 時点で必ず決める項目と、後からでも差し替え可能な項目を仕分ける
- UI モック（HTML）とデータモデルの対応関係を整理し、API のラフスキーマを起こす

という順で詰めていくことを想定する。
