<!-- # メモ機能修正依頼 ①

## 前提

1. この要望書は、`C:\work\Crusco\mvp-handson\implement_prompt.md` の `5.1 メモ機能（Phase 1 コア）` の実装完了を踏まえて、次のフェーズに進む前に、以下の修正を加えて、わたしの要望に沿ったメモ機能を完成させるための具体的な要望をまとめたものです。

2. 今回の修正によって後の工程において実装内容、機能に乖離が生じた場合は、勝手に判断・実装をせず、かならずわたしに確認を求めること。

3. この機能修正においても、`C:\work\Crusco\mvp-handson\implement_prompt.md` および `C:\work\Crusco\mvp-handson\docs\requirements\hands-on-mvp.md`での指示・要望・あなたの教師役という立ち回りを厳守すること

## 要望

1. メモ一覧を表示する `EntryList.tsx` は現在の表示形式を完全に廃し、**中央セクションで**タイル・リストを切り替えられる形で一覧表示したい。
2. メモの構成は `title` と `body` ではなく、`title` と `body` の代わりに `content` で構成される。
3. 新規作成ボタンを廃止し、画面中央下部に `content` に対応するテキスト入力欄を有する**ナビゲーションバー**を配置したい。
4. ナビゲーションバーには、メモ入力用テキストボックス（初期状態では 1 行、入力文字数に応じてテキストエリアが伸びる）と、タイル・リスト表示切替ボタン、ファイルアップロードボタンを配置。今回の修正対応後にファイルアップロード機能を実装する。
5. 現在のメモ一覧リストから選択したメモを右カラムに表示する形式を廃止し、タイル・リスト状に配置されたメモをクリックすると**その場で**選択状態になったメモを直接入力で編集や、選択状態時のみ表示される削除ボタンで削除したい。
6. ボタンのアイコン用に「Phospher-icon」を使用したい。各ボタンに対応するアイコンは以下とする。
   - タイルボタン `<GridFour size={32} />`
   - リストボタン `<Rows size={32} />`
   - ファイルアップロードボタン `<UploadSimple size={32} />`
   - 削除ボタン `<TrashSimple size={32} />`
7. メモはタイトルが廃止され、内容だけを示す `content` をはじめとした以下の形に修正する。それに伴い DB の構造も変更する。
   ```typescript
   const mapToEntry = (row: any): Entry => {
     return {
       id: row.id,
       kind: row.kind,
       content: row.content, //titleを廃止、bodyをcontentに変更
       isDone: row.is_done,
       createdAt: row.created_at,
       updatedAt: row.updated_at,
     };
   };
   ```

## 期待する動作

1. `App.tsx` は左カラム・中央セクション・画面下部ナビゲーションバーの構成になり、右カラムは廃止され、中央セクション内で右カラムでの機能を完結させる。
2. ナビゲーションバーでテキストを入力し、Enter キーを押すとそのままメモが新規作成され、中央セクションのメモ一覧に追加される。
3. ナビゲーションバー内の Phospher-icon を使用したタイル・リスト表示切替ボタンを押下することで、セッション内でメモ一覧のタイル・リスト表示を切り替えられる。
4. ナビゲーションバー内に Phospher-icon を使用したファイルアップロードボタンが存在する（機能は後で実装する）。
5. 一覧表示されているメモをクリックすることで、クリックしたタイル・リスト内のメモをそのまま直接入力で編集や、選択状態時のみ表示される削除ボタンで削除できる。 -->

# メモ機能修正依頼 ①

## 前提

1. この要望書は、`C:\work\Crusco\mvp-handson\implement_prompt.md` の `5.1 メモ機能（Phase 1 コア）` の実装完了を踏まえて、次のフェーズに進む前に、以下の修正を加えて、わたしの要望に沿ったメモ機能を完成させるための具体的な要望をまとめたものです。

2. 今回の修正によって後の工程において実装内容、機能に乖離が生じた場合は、勝手に判断・実装をせず、かならずわたしに確認を求めること。

3. この機能修正においても、`C:\work\Crusco\mvp-handson\implement_prompt.md` および `C:\work\Crusco\mvp-handson\docs\requirements\hands-on-mvp.md`での指示・要望・あなたの教師役という立ち回りを厳守すること

## 要望

1. 現状文字数が多くても少なくても、すべてのメモのサイズが一律の高さ・横幅で表示されてしまっているので、タイル・リスト表示ともに各メモの内容によって適切なサイズで表示されるように修正する。また、タイル表示時はメモの右下をドラッグすることでメモを一つずつサイズ変更をできるようにしたい。これで変更された表示内容はページ再読み込み時にも保存される。

2. タイル・リスト表示ともに各メモの左上に `<DotsSix size={32} />` を使用してハンドルを追加し、それをドラッグすることでメモの順序を並び変えられるようにしたい。これで変更された表示内容はページ再読み込み時にも保存される。

3. 現状メモ削除時、アラートなどを何も表示せずにメモを即座に削除するようにしました。これを、動作は変わらず削除時にトーストを画面中央上部に表示させるようにしたいです。今後アラートを使用する際も変わりにこのトーストを使用するようにしたいので、共有のトーストコンポーネントを実装したいです。トーストは、以下の定義を持つものとします。

   - `message: string` : トーストに表示するメッセージ
   - `variant: 'default' | 'destructive' | 'success' | 'warning'` : トーストの表示スタイル
   - `action` : トーストに表示するアクション(操作の取り消し、リンクなど。null 可)
   - `onClose: () => void` : トーストを閉じる際に呼び出されるコールバック関数

4. 現状ナビゲーションバーに文字を入力する際、どんなに文字数が多くても一行のテキスト input に入力するしかありません。これを、入力文字数に応じてテキストエリアが伸びるよう修正したいです。この時、ファイルアップロードボタンや表示切替ボタンは初期位置を維持し、テキストエリアとナビゲーションバー `border-top` のみ高さが変更されます。

## 期待する動作

1. メモ一覧画面において、メモの文字数によってテキストエリアの高さが自動的に変更される。
2. メモ一覧画面において、タイル表示時にハンドルをドラッグすることで柔軟にメモの並び替えができる。
3. メモ一覧画面において、タイル表示時にメモの右下をドラッグすることでメモのサイズを変更できる。
4. メモ一覧画面において、タイル表示時に変更したメモの順序やメモのサイズがページ再読み込み時にも保存される。
5. メモ削除時、即座に削除され、トーストを画面中央上部に表示させる。トーストには「メモが削除されました」と表示され、`action` には「元に戻す」ボタン、`<X size={32} />` による「閉じる」ボタンが表示される。
6. トースト上の `<X size={32} />` による「閉じる」ボタンを押すとトーストが閉じられる。
7. トースト上の「元に戻す」ボタンを押すと削除したメモが復元される。
8. ナビゲーションバーでメモを入力する際、入力された文字数によってテキストエリアの高さが自動的に変更される。
